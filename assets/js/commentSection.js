(()=>{const e=document.getElementById("videoContainer"),t=document.getElementById("commentForm"),n=t.querySelector("textarea"),o=(t.querySelector("button"),async t=>{t.preventDefault();const o=e.dataset.videoid,a=n.value;if(""===a)return;const c=await fetch(`/api/video/${o}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:a})});if(201===c.status){n.value="";const{newCommentId:e}=await c.json();((e,t)=>{const n=document.querySelector(".video__comments ul"),o=document.createElement("li");o.dataset.id=t,o.className="video__comment";const a=document.createElement("i");a.className="fas fa-comment";const c=document.createElement("span");c.innerText=` ${e}`;const d=document.createElement("span");d.innerText=" X ",o.appendChild(a),o.appendChild(c),o.appendChild(d),n.prepend(o)})(a,e)}});t&&t.addEventListener("submit",o)})();