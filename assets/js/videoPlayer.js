(()=>{const e=document.querySelector("video"),t=document.getElementById("play"),n=t.querySelector("i"),d=document.getElementById("mute"),a=d.querySelector("i"),u=document.getElementById("volume"),l=document.getElementById("currenTime"),o=document.getElementById("totalTime"),s=document.getElementById("timeline"),m=document.getElementById("fullScreen"),r=m.querySelector("i"),i=document.getElementById("videoContainer"),c=document.getElementById("videoControls"),v=document.getElementById("commentForm").querySelector("textarea");let E=null,y=null,f=.5;e.volume=f;const g=t=>{e.paused?e.play():e.pause(),n.classList=e.paused?"fas fa-play":"fas fa-pause"},L=t=>{e.muted?e.muted=!1:e.muted=!0,a.classList=e.muted?"fas fa-volume-mute":"fas fa-volume-up",u.value=e.muted?0:f},p=e=>new Date(1e3*e).toISOString().substr(14,5),T=()=>{document.fullscreenElement?(document.exitFullscreen(),r.classList="fas fa-expand"):(i.requestFullscreen(),r.classList="fas fa-compress")},I=()=>c.classList.remove("showing");t.addEventListener("click",g),d.addEventListener("click",L),u.addEventListener("input",(t=>{const{target:{value:n}}=t;e.muted&&(e.muted=!1,d.innerText="Mute"),f=n,e.volume=n})),e.addEventListener("loadeddata",(()=>{o.innerText=p(Math.floor(e.duration)),s.max=Math.floor(e.duration)})),e.addEventListener("timeupdate",(()=>{l.innerText=p(Math.floor(e.currentTime)),s.value=Math.floor(e.currentTime)})),e.addEventListener("ended",(()=>{const e=i.dataset.videoid;fetch(`/api/video/${e}/view`,{method:"POST"})})),i.addEventListener("mousemove",(()=>{E&&(clearTimeout(E),E=null),y&&(clearTimeout(y),y=null),c.classList.add("showing"),y=setTimeout(I,3e3)})),i.addEventListener("mouseleave",(()=>{E=setTimeout(I,3e3)})),s.addEventListener("input",(t=>{const{target:{value:n}}=t;e.currentTime=n})),m.addEventListener("click",T),e.addEventListener("click",g),document.addEventListener("keyup",(e=>{e.target!==v&&"Space"===e.code&&(e.preventDefault(),g()),e.target!==v&&"KeyM"===e.code&&L(),e.target!==v&&"KeyF"===e.code&&T()}))})();